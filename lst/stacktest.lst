     1     		        TITLE   'test for PUSH and POP instructions'
     2
     3 			        ;; This test is being used before we deal with SHADOW,
     4 			        ;; so it can only read the SHADOW ROM and writes will go
     5 			        ;; to the shadowed ram area.
     6
     7      00 00	        ORG     00000h
     8
     9 			START:  
    10 0000 31 80 00	        LXI     SP, DATA
    11 0003 C1		        POP     BC
    12 0004 D1		        POP     DE
    13 0005 E1		        POP     HL
    14 0006 F1		        POP     PSW
    15 0007 00		        NOP
    16 0008		        DB	18H             ;next subtest
            18 
    17
    18 0009 00		        NOP
    19 000A 00		        NOP
    20 000B F5		        PUSH    PSW
    21 000C E5		        PUSH    HL
    22 000D D5		        PUSH    DE
    23 000E C5		        PUSH    BC
    24 000F 00		        NOP
    25 0010		        DB	18H             ;next subtest
            18 
    26
    27 0011 11 34 12	        LXI     DE,1234H
    28 0014 21 78 56	        LXI     HL,5678H
    29 0017 D5		        PUSH    DE
    30 0018		        DB	18H             ;next subtest
            18 
    31 0019 E3		        XTHL
    32 001A E5		        PUSH    HL
    33 001B		        DB	10H             ;test complete
            10 
    34 001C 00		        NOP
    35 001D 00		        NOP
    36 001E 76		        HLT
    37
    38      00 7C	        ORG     007CH
    39
    40 007C		        DB      00H, 00H,
            00 00 
    41 007E		        DB      34H, 12H,
            34 12 
    42
    43      00 80	        ORG     0080H
    44 			DATA:
    45 0080		        DB      11H, 22H
            11 22 
    46 0082		        DB      33H, 44H
            33 44 
    47 0084		        DB      55H, 66H
            55 66 
    48 0086		        DB      28H, 77H
            28 77 
    49 			;;; 28H checks ignored bits in the PSW:
    50 			;;; - 0x20 is ignored on pop, and pushed as 1
    51 			;;; - 0x08 is ignored on pop, and pushed as 1
    52 			;;; - 0x02 is ignored on pop, and pushed as 0


*******************************************************************************
                                 Symbols table
*******************************************************************************

Names		Types	Values
-----		-----	------
START		Label	00000h
DATA		Label	00080h

Statistics
----------
"Name"	= 0
"EQU"	= 0
"SET"	= 0
Labels	= 2


