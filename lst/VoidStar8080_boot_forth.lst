     1     			TITLE	'FIG-FORTH Cold Start Loader for the (void *)8080 simulated microcomputer'
     2
     3 				;; This cold start loader resides on Track 00 Sector 1, the
     4 				;; first sector of the diskette. It is loaded into memory at
     5 				;; 0080h by the VoidStar8080 boot rom, and brings the FIG-FORTH
     6 				;; system into memory at the proper location (see below), then
     7 				;; starts it running.
     8 				;;
     9 				;; This cold start loader presumes that the BDEV controller
    10 				;; has just read this program from Track 00 Sector 01, and
    11 				;; makes use of its Auto-Increment capabilities to simply
    12 				;; continue reading the disk sequentially at the next sector.
    13 				;;
    14 				;; This cold start loader is not used again, unless the BIOS
    15 				;; is overwritten, at which time this loader will again be
    16 				;; read from the disk into memory.
    17 			        ;;
    18 			        ;; FIG-FORTH lives at 0100h, and the minimum FIG-FORTH image
    19 			        ;; extends to just short of 1C00h, requiring 54 sectors,
    20 			        ;; which is larger than the two tracks used by CP/M.
    21
    22      01 00	text	equ	0100h		;FIG-FORTH load address
    23      01 00	start	equ	0100h           ;FIG-FORTH cold entry point
    24      1C 00	etext	equ	1C00h		;FIG-FORTH end of disk image
    25      1B 00	bytes	equ	etext-text	;size of FIG-FORTH image to load, in bytes
    26
    27      00 80	bps     equ     128
    28      00 36	sects   equ     bytes/bps
    29
    30      00 0E	bddat	equ	14		;disk controller data port
    31
    32      00 00		org	0000h		;ROM loads us here
    33
    34 0000 11 00 1B	cold	lxi     de,bytes
    35 0003 DB 0E	loop	in	bddat           ;get byte from disk
    36 0005 77			mov	m,a             ;put byte to memory
    37 0006 23			inx	hl
    38 0007 1D			dcr	e
    39 0008 C2 03 00		jnz	loop
    40 000B 15			dcr	d
    41 000C C2 03 00		jnz	loop
    42 000F C3 00 01		jmp	start           ;turn control over to FIG-FORTH.
    43
    44     			end


*******************************************************************************
                                 Symbols table
*******************************************************************************

Names		Types	Values
-----		-----	------
text		EQU	00100h
start		EQU	00100h
etext		EQU	01C00h
bytes		EQU	01B00h
bps		EQU	00080h
sects		EQU	00036h
bddat		EQU	0000Eh
cold		Label	00000h
loop		Label	00003h

Statistics
----------
"Name"	= 0
"EQU"	= 7
"SET"	= 0
Labels	= 2


